{% extends "base.html" %}

{% block content %}
  <div class="card">
    <h1>Prediksi Iris</h1>
    <p class="subtitle">Masukkan ukuran sepal dan petal untuk mendapatkan prediksi.</p>
    <form method="post" action="/prediksi">
      <div class="form-grid">
        <div>
          <label for="sepal_length">Sepal length (cm)</label>
          <input
            id="sepal_length"
            name="sepal_length"
            type="number"
            step="0.1"
            placeholder="5.1"
            value="{{ values.sepal_length if values.sepal_length is defined }}"
            required
          />
        </div>
        <div>
          <label for="sepal_width">Sepal width (cm)</label>
          <input
            id="sepal_width"
            name="sepal_width"
            type="number"
            step="0.1"
            placeholder="3.5"
            value="{{ values.sepal_width if values.sepal_width is defined }}"
            required
          />
        </div>
        <div>
          <label for="petal_length">Petal length (cm)</label>
          <input
            id="petal_length"
            name="petal_length"
            type="number"
            step="0.1"
            placeholder="1.4"
            value="{{ values.petal_length if values.petal_length is defined }}"
            required
          />
        </div>
        <div>
          <label for="petal_width">Petal width (cm)</label>
          <input
            id="petal_width"
            name="petal_width"
            type="number"
            step="0.1"
            placeholder="0.2"
            value="{{ values.petal_width if values.petal_width is defined }}"
            required
          />
        </div>
      </div>
      <button type="submit">Prediksi</button>
    </form>

    {% if result %}
      <div class="result-box">
        Hasil: {{ result.label }} (ID {{ result.prediction_id }})
      </div>
    {% endif %}
  </div>

  <div class="card">
    <h2>Riwayat prediksi</h2>
    {% if history and history|length > 0 %}
      <table class="table">
        <thead>
          <tr>
            <th>Waktu</th>
            <th>Sepal</th>
            <th>Petal</th>
            <th>Label</th>
          </tr>
        </thead>
        <tbody>
          {% for row in history %}
            <tr>
              <td>{{ row.created_at }}</td>
              <td>{{ row.sepal_length }}, {{ row.sepal_width }}</td>
              <td>{{ row.petal_length }}, {{ row.petal_width }}</td>
              <td>{{ row.label }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="subtitle">Belum ada riwayat prediksi.</p>
    {% endif %}
  </div>
{% endblock %}
